#!/bin/bash

# Make sure we build using JDK 7
export JAVA_HOME="/usr/lib/jvm/oracle-jdk-bin-1.7/"

# Clone the JUnit repository if it doesn't already exist
git clone https://github.com/junit-team/junit4.git

# The tests put this file in the Soot classpath
mkdir lib
cp junit4/lib/hamcrest-core-1.3.jar lib/

cd junit4
while read date commit
do
    git clean -d -x -f
    git checkout $commit
    ant jars
    mkdir -p ../$date/bin
    unzip "junit4.12-SNAPSHOT/junit-4.12-SNAPSHOT.jar" -d ../$date/bin/
done << EOF
030720132221    5edfb4447b609c178d63a3d991172861076d143b
031420132151    34336085d5aba69c997f8e6b244531561afebcd4
031620130026    15c6048229bd16c4bfdd80b23f37357a58226d20
031820131702    74cab2dc9b8c32482d2c86a66a0dd9318930b4bc
032020132304    5820172f30e56e9b0bc8feca6d7b3be58b7ee0ee
032120131735    9d9899bce3506e7d87ebc6352a3cf3d25ea20f54
032120132100    aa7c75db0608e8ce9e76ee60c70ba429c7260fba
032120132144    40b8761099da900ad219fe9b06060cda1e212f83
032720132135    b01900fddca5ff54258e621025ccdbbc75f880f1
032720132341    114025fce0f28c5d7daa2204c7b91537c62f9f09
032720132348    b1cf4b5bc6ead8c3dfcbbb9ebe69be85f5e53cb8
040120132353    56193048f411846a58c0e0377a5f1ccfecd3d2f9
042920132120    826529633261161edd2d9dc0f866b2c3c0420514
043020131827    b0c0aafae2f3008c27ba06babd2b2dec15af53e8
050120130055    b5084eb51ffdb2a3bd9bed7294afc941a733a693
050220131806    c85a267605d4484121afeccef972a7266481ee7c
050220131856    ae1fc256c8a56f0bd4ad88acd1190503002726f7
050720130016    cfaceb6d34390d999ff238d53fcb73898b32f98f
052720131836    fa5df4e972db64249046b789b3dc730657f11c58
052720132001    b026c088d800013fa73ffb9647c13d3a87cdf55d
060520130242    aeaecd2e8bb022049ed89021df1ec6c4dbb15f77
060520132159    c86a84d3beed29c4f8389b1172fde95f72d2d6ed
060620130028    185dd23d960efc6630989c411935f2d18b17e09c
060620130722    ede492496de0f3c0872216ac9c9b88a00fdef09e
060620132234    262e81ef672c4851372057766fe83ffd7a412385
EOF
